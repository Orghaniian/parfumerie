<template>
  <nav class="navbar">
    <ul>
      <li>
        <ul>
          <li class="btn">
            <svg @click="logout" v-if="logged" width="51" height="51" viewBox="0 0 51 51" fill="#fffeff" xmlns="http://www.w3.org/2000/svg">
              <path d="M50.9166 25.5L40.7499 15.3334V22.9584H20.4166V28.0417H40.7499V35.6667L50.9166 25.5ZM45.8333 40.75C42.6325 45.0176 38.1702 48.17 33.0783 49.7606C27.9865 51.3512 22.5232 51.2993 17.4625 49.6124C12.4017 47.9255 7.99999 44.689 4.88085 40.3614C1.7617 36.0338 0.083252 30.8346 0.083252 25.5C0.083252 20.1655 1.7617 14.9662 4.88085 10.6387C7.99999 6.31107 12.4017 3.07459 17.4625 1.38767C22.5232 -0.299248 27.9865 -0.351091 33.0783 1.23949C38.1702 2.83007 42.6325 5.98243 45.8333 10.25H38.8945C35.9597 7.66177 32.3403 5.97532 28.4708 5.39306C24.6013 4.81081 20.6459 5.35748 17.0794 6.96747C13.5128 8.57747 10.4866 11.1824 8.36383 14.4697C6.24106 17.757 5.11193 21.5869 5.11193 25.5C5.11193 29.4131 6.24106 33.2431 8.36383 36.5304C10.4866 39.8177 13.5128 42.4226 17.0794 44.0326C20.6459 45.6426 24.6013 46.1893 28.4708 45.607C32.3403 45.0248 35.9597 43.3383 38.8945 40.75H45.8333Z"/>
            </svg>
            <router-link :to="{ name: 'Connexion' }" v-else>Connexion</router-link>
          </li>
          <li class="btn">
            <router-link to="/">
            <svg width="49" height="49" viewBox="0 0 49 49" xmlns="http://www.w3.org/2000/svg">
              <path d="M3.12511 29.25H7.87511V45.875C7.87511 46.5049 8.12533 47.109 8.57073 47.5544C9.01613 47.9998 9.62022 48.25 10.2501 48.25H38.7501C39.38 48.25 39.9841 47.9998 40.4295 47.5544C40.8749 47.109 41.1251 46.5049 41.1251 45.875V29.25H45.8751C46.3341 29.2504 46.7833 29.1175 47.1682 28.8675C47.5532 28.6175 47.8572 28.2611 48.0435 27.8416C48.231 27.4223 48.2927 26.9576 48.221 26.5039C48.1493 26.0502 47.9474 25.6271 47.6397 25.2861L26.2647 1.53611C25.3646 0.533861 23.6356 0.533861 22.7355 1.53611L1.36049 25.2861C1.05338 25.6273 0.851732 26.0502 0.779949 26.5036C0.708167 26.957 0.769324 27.4215 0.956021 27.8409C1.14272 28.2603 1.44695 28.6166 1.83191 28.8666C2.21687 29.1167 2.66605 29.2499 3.12511 29.25ZM16.551 23.6474C17.5395 22.6714 18.8728 22.1241 20.2619 22.1241C21.6511 22.1241 22.9843 22.6714 23.9729 23.6474L24.5049 24.1699L25.0345 23.6474C26.0234 22.6712 27.3571 22.1239 28.7466 22.1239C30.1362 22.1239 31.4698 22.6712 32.4587 23.6474C32.9494 24.1194 33.3397 24.6855 33.6063 25.312C33.8729 25.9384 34.0103 26.6122 34.0103 27.293C34.0103 27.9738 33.8729 28.6476 33.6063 29.274C33.3397 29.9004 32.9494 30.4666 32.4587 30.9386L24.5049 38.75L16.551 30.9386C16.0604 30.4666 15.6701 29.9004 15.4034 29.274C15.1368 28.6476 14.9994 27.9738 14.9994 27.293C14.9994 26.6122 15.1368 25.9384 15.4034 25.312C15.6701 24.6855 16.0604 24.1194 16.551 23.6474Z"/>
            </svg>
          </router-link></li>
        </ul>
      </li>
      <li>
        <div class="titre">
          <h1>Lalavande Fidelit√©</h1>
        </div>
      </li>
      <li>
        <ul>
          <li class="btn">
            <router-link :to="{ name: 'Catalogue' }">
              <svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.75 22.5H4.5V40.5C4.5 41.6935 4.97411 42.8381 5.81802 43.682C6.66193 44.5259 7.80653 45 9 45H20.25V22.5H6.75ZM36 22.5H24.75V45H36C37.1935 45 38.3381 44.5259 39.182 43.682C40.0259 42.8381 40.5 41.6935 40.5 40.5V22.5H36ZM37.7798 11.25C38.1097 10.156 38.2684 9.01753 38.25 7.875C38.25 3.5325 34.7175 0 30.375 0C26.7255 0 24.2887 3.3345 22.716 6.94125C21.1657 3.5325 18.6052 0 14.625 0C10.2825 0 6.75 3.5325 6.75 7.875C6.75 9.216 6.92775 10.3252 7.22025 11.25H0V20.25H20.25V15.75H24.75V20.25H45V11.25H37.7798ZM11.25 7.875C11.25 6.01425 12.7642 4.5 14.625 4.5C16.623 4.5 18.4815 7.93125 19.5705 11.25H13.5C12.6585 11.25 11.25 11.25 11.25 7.875ZM30.375 4.5C32.2357 4.5 33.75 6.01425 33.75 7.875C33.75 11.25 32.3415 11.25 31.5 11.25H25.9268C27.0742 7.704 28.7415 4.5 30.375 4.5Z"/>
              </svg>
            </router-link>
          </li>
          <li class="btn">
            <router-link :to="{ name: 'Ajouter' }" v-if="admin">
              <svg width="81" height="82" viewBox="0 0 81 82" xmlns="http://www.w3.org/2000/svg">
                <path d="M64 40C64 42.212 63.808 44 61.596 44H44V61.596C44 63.804 42.212 64 40 64C37.788 64 36 63.804 36 61.596V44H18.404C16.196 44 16 42.212 16 40C16 37.788 16.196 36 18.404 36H36V18.404C36 16.192 37.788 16 40 16C42.212 16 44 16.192 44 18.404V36H61.596C63.808 36 64 37.788 64 40Z"/>
              </svg>

            </router-link>
          </li>
          <li class="btn" v-if="admin"><router-link :to="{ name: 'Clients' }">
            <svg width="51" height="42" viewBox="0 0 51 42" xmlns="http://www.w3.org/2000/svg">
              <path d="M33.75 8.5C33.75 10.688 32.8808 12.7865 31.3336 14.3336C29.7865 15.8808 27.688 16.75 25.5 16.75C23.312 16.75 21.2135 15.8808 19.6664 14.3336C18.1192 12.7865 17.25 10.688 17.25 8.5C17.25 6.31196 18.1192 4.21354 19.6664 2.66637C21.2135 1.11919 23.312 0.25 25.5 0.25C27.688 0.25 29.7865 1.11919 31.3336 2.66637C32.8808 4.21354 33.75 6.31196 33.75 8.5Z" />
              <path d="M47.5 14C47.5 15.4587 46.9205 16.8576 45.8891 17.8891C44.8576 18.9205 43.4587 19.5 42 19.5C40.5413 19.5 39.1424 18.9205 38.1109 17.8891C37.0795 16.8576 36.5 15.4587 36.5 14C36.5 12.5413 37.0795 11.1424 38.1109 10.1109C39.1424 9.07946 40.5413 8.5 42 8.5C43.4587 8.5 44.8576 9.07946 45.8891 10.1109C46.9205 11.1424 47.5 12.5413 47.5 14Z" />
              <path d="M36.5 33.25C36.5 30.3326 35.3411 27.5347 33.2782 25.4718C31.2153 23.4089 28.4174 22.25 25.5 22.25C22.5826 22.25 19.7847 23.4089 17.7218 25.4718C15.6589 27.5347 14.5 30.3326 14.5 33.25V41.5H36.5V33.25Z" fill="white"/>
              <path d="M14.5 14C14.5 15.4587 13.9205 16.8576 12.8891 17.8891C11.8576 18.9205 10.4587 19.5 9 19.5C7.54131 19.5 6.14236 18.9205 5.11091 17.8891C4.07946 16.8576 3.5 15.4587 3.5 14C3.5 12.5413 4.07946 11.1424 5.11091 10.1109C6.14236 9.07946 7.54131 8.5 9 8.5C10.4587 8.5 11.8576 9.07946 12.8891 10.1109C13.9205 11.1424 14.5 12.5413 14.5 14Z" />
              <path d="M42 41.5001V33.2501C42.004 30.4541 41.2941 27.7034 39.9375 25.2586C41.1567 24.9466 42.4311 24.9172 43.6634 25.1726C44.8957 25.428 46.0534 25.9615 47.0481 26.7324C48.0429 27.5032 48.8485 28.4911 49.4033 29.6207C49.9582 30.7502 50.2478 31.9916 50.25 33.2501V41.5001H42Z" />
              <path d="M11.0625 25.2586C9.70606 27.7034 8.99615 30.4541 9 33.2501V41.5001H0.750001V33.2501C0.749471 31.9907 1.03727 30.7479 1.59135 29.6169C2.14543 28.486 2.95108 27.4969 3.94656 26.7254C4.94203 25.954 6.1009 25.4207 7.33435 25.1665C8.56781 24.9122 9.8431 24.9437 11.0625 25.2586Z"/>
            </svg>

          </router-link></li>
          <li class="btn" v-if="admin">
            <router-link :to="{ name: 'Inscrire' }">Inscrire</router-link>
          </li>
          <li class="btn" v-if="admin"><router-link to="/">
            <svg width="50" height="51" viewBox="0 0 50 51" xmlns="http://www.w3.org/2000/svg">
              <path d="M48.474 21.7632L43.0768 20.1243C42.7037 18.7989 42.1905 17.5186 41.5463 16.3057L44.1885 11.2743C44.2876 11.0844 44.3239 10.867 44.292 10.6544C44.2601 10.4419 44.1616 10.2454 44.0113 10.0943L40.1607 6.16095C40.0121 6.008 39.819 5.90785 39.6101 5.87537C39.4011 5.8429 39.1874 5.87982 39.0007 5.98068L34.0868 8.65207C32.8827 7.96481 31.6075 7.41517 30.2846 7.01318L28.6735 1.58846C28.6053 1.38854 28.4766 1.21577 28.3058 1.09502C28.135 0.974273 27.9309 0.91177 27.7229 0.916511H22.2774C22.0682 0.917502 21.8647 0.986384 21.6967 1.11313C21.5286 1.23988 21.4047 1.41788 21.3429 1.62123L19.7318 7.02957C18.3978 7.42942 17.1118 7.9791 15.8974 8.66845L11.064 6.01345C10.8773 5.9126 10.6637 5.87567 10.4547 5.90815C10.2457 5.94062 10.0526 6.04077 9.90405 6.19373L5.98905 10.0779C5.83868 10.229 5.74023 10.4255 5.7083 10.638C5.67638 10.8506 5.71268 11.068 5.81182 11.2579L8.42182 16.1746C7.74525 17.4047 7.20491 18.7074 6.81071 20.0587L1.47793 21.6976C1.27803 21.7604 1.10305 21.8865 0.978446 22.0574C0.853845 22.2284 0.78613 22.4354 0.785156 22.6482V28.1876C0.78613 28.4004 0.853845 28.6074 0.978446 28.7784C1.10305 28.9493 1.27803 29.0754 1.47793 29.1382L6.84293 30.7771C7.24144 32.1059 7.78169 33.3864 8.45405 34.5957L5.81182 39.7418C5.71268 39.9317 5.67638 40.1491 5.7083 40.3616C5.74023 40.5742 5.83868 40.7706 5.98905 40.9218L9.8396 44.8387C9.98818 44.9917 10.1813 45.0918 10.3902 45.1243C10.5992 45.1568 10.8129 45.1199 10.9996 45.019L15.9779 42.3148C17.1556 42.9613 18.3979 43.4777 19.6835 43.8554L21.2946 49.3785C21.3563 49.5818 21.4803 49.7598 21.6483 49.8866C21.8164 50.0133 22.0198 50.0822 22.229 50.0832H27.6746C27.8838 50.0822 28.0873 50.0133 28.2553 49.8866C28.4234 49.7598 28.5473 49.5818 28.609 49.3785L30.2202 43.839C31.4948 43.4594 32.7262 42.943 33.8935 42.2985L38.904 45.019C39.0907 45.1199 39.3044 45.1568 39.5134 45.1243C39.7224 45.0918 39.9155 44.9917 40.064 44.8387L43.9146 40.9218C44.065 40.7706 44.1634 40.5742 44.1953 40.3616C44.2273 40.1491 44.191 39.9317 44.0918 39.7418L41.4174 34.6612C42.0576 33.4693 42.5707 32.2111 42.9479 30.9082L48.3774 29.2693C48.5773 29.2065 48.7523 29.0804 48.8769 28.9095C49.0015 28.7385 49.0692 28.5316 49.0702 28.3187V22.7301C49.0797 22.5263 49.0276 22.3245 48.9211 22.1516C48.8145 21.9788 48.6585 21.8432 48.474 21.7632ZM25.0002 34.5137C23.2476 34.5137 21.5344 33.9851 20.0772 32.9946C18.62 32.0042 17.4842 30.5964 16.8136 28.9493C16.1429 27.3022 15.9674 25.4898 16.3093 23.7413C16.6512 21.9928 17.4952 20.3867 18.7344 19.1261C19.9737 17.8654 21.5526 17.007 23.2714 16.6592C24.9903 16.3114 26.772 16.4899 28.3912 17.1721C30.0103 17.8543 31.3942 19.0097 32.3679 20.492C33.3416 21.9743 33.8613 23.7171 33.8613 25.4998C33.8613 27.8905 32.9277 30.1832 31.2659 31.8736C29.6041 33.5641 27.3503 34.5137 25.0002 34.5137Z"/>
            </svg>

          </router-link></li>
          <li class="btn" v-if="logged && !admin"><router-link :to="{name: 'Profil'}">Profil</router-link></li>
        </ul>
      </li>

    </ul>
    <div v-if="logged && !admin">
      <button  @click="toggleShowPanier">panier</button>
      <div v-if="showPanier">
        {{ panier }}
        <router-link :to="{ name: 'Panier' }">Acceder au panier</router-link>
      </div>
    </div>

  </nav>
</template>

<script>
import { useRouter } from "vue-router"
import isAdmin from "@/utils/isAdmin";
import {computed, ref} from "vue";
import useCart from "@/utils/useCart"
export default {
  props: {
    logged : Boolean
  },
  setup (props, context) {
    const router = useRouter()
    const logout = function (){
      context.emit("logout")
      router.push("/")
    }

    const admin = computed(() => isAdmin())

    const showPanier = ref(false)
    const toggleShowPanier = () => showPanier.value = !showPanier.value
    const { panier } = useCart()


    return { logout, admin, showPanier, toggleShowPanier, panier }
  }
};
</script>

<style lang="scss">
@import url("https://fonts.googleapis.com/css?family=Rouge+Script");
@import "@/assets/variables.scss";

.navbar {
  padding: 10px;
  margin-bottom: 10px;

  svg {
    fill: $bgColor;
  }

  .btn {
    background-color: $darkPurple;
    height: 66px;
    width: 66px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 66px;
    margin-right: 15px;
  }

  ul {
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: space-between;
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: none;

    li {
      &.droite{
        justify-self: right;
      }
      a {
        display: block;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;font-weight: bold;

        &.router-link-exact-active {
            svg{
              fill: #A79FDB;
            }
        }
      }
    }
  }

  .titre {
    border: $darkPurple solid;
    border-radius: 20px;
    padding: 0 20px;
    box-sizing: border-box;

    h1 {
      font-family: Rouge Script,sans-serif;
      font-size: 3.75em;
      font-weight: 400;
      color: $darkPurple;
      margin: 0;
      padding: 12px 50px;
    }
  }
}
</style>